# 这是一份关于[Sync Channel Bot](https://t.me/sc_1006_bot)的说明文档

## 导航
[Bot简介](#bot简介) / [使用须知](#使用须知) / [Bot功能](#bot功能) / [关于使用Bot](#关于使用bot) / [补充](#补充) / [关于bot命令](#关于bot命令)

## Bot简介
该Bot可以将频道内新发送的消息，在多个频道之间同步发送，比如你用Bot创建了A，B，C，D，，，（最多10个关联）频道之间的关联，那么你在任意一个频道发送的新消息，都会同步转发到其他所有关联的频道。

<a style="color:red;font-size:1.5em">目前Bot在初期开发阶段，有任何建议和Bug欢迎来交流群组反馈</a>

[Bot反馈群组](https://t.me/ggbt_1120)

## 使用须知
- 本Bot只能工作在 **频道**
- Bot必须为管理员（只要是管理员即可，不限定具体权限）

## Bot功能
- 使用Bot将多个频道绑定为**同步组**，之后同步组内的任一频道的新消息，都会在同步组所有其他频道里同步转发。
- 支持媒体组转发
- **懒惰模式** （该选项对整个同步组生效，懒惰模式下，新消息默认不会转发，可在消息内添加 #FF 标签临时强制发转）
- 临时不转发，在非**懒惰模式**下，在消息内添加 #NF 标签，可临时不转发本条消息

- [ ] 计划功能：同步编辑 

## 关于使用Bot
- 将Bot添加到所有你要创建同步组的频道，并在所有频道都将Bot设置为管理员，然后私聊Bot使用命令行创建同步组即可。

## 补充
- 关于媒体组转发
  - 如果不做特殊处理的话，收到的媒体组，会被分开一条条的转发到其他频道。比如你再A频道发送了一个媒体组有6张图片，那么默认情况下，其他频道的转发消息会是分开的6张图片，也就是6条独立消息，而不是一个媒体组，这是很影响体验的。但Bot会对媒体组消息做特殊处理，如果Bot发现消息是媒体组时，会进入捕获模式，尝试捕获媒体组内的所有媒体，然后转发到其他群组。Bot对媒体组的转发，会依然以组的形式发送，和你原始消息一模一样，而不是分条转发。
- 关于**懒惰模式**
   - 也就是默认不同步转发消息，毕竟默认同步多个群组的新消息，明显不是很符合逻辑的需求。在该模式下，同步组内的新消息只有在添加了 #FF 标记的情况下才会被转发。该模式默认是关闭的。
 - 关于**频道冻结模式**
   - 相当于频道在同步组内*隐身*了，它依旧还在同步组内，但消息同步的操作对它是不可见的。
 - Bot内部的自动逻辑
   - 如果Bot发现一个同步组的频道数量小于等于1个，Bot会删除同步组。
   - 冻结同步组不会删除同步组，而是冻结同步组内所有的频道（相当于一个不会同步的同步组，可用于临时关闭所有同步行为时使用）
   - 删除同步组，会自动将同步组的所有频道退出该同步组

## 关于bot命令
**下面命令只能在私聊Bot时使用，所有命令都未在BotFather注册，你需要手动输入**
- `/ping`: bot会回复pong，检测是否存活的传统操作？
- `/start`: 显示Bot的概述
- `/group`：对同步组操作的主命令
  - `create`：创建同步组命令。
    - 手动模式：`-cids [channelId01, channelId02, channelId03 ... ]`，`-cids` 是 `--channel-ids` 的缩写，你也可以用全程来代替`-cids`，频道id必须提供2个及以上，但要小于10个。Bot必须加入了所有频道，且为所有频道管理员。你必须为所有频道的创建者。示例`/group create -cids 121312 123123124 124124124`，
    - 自动模式：`-auto`，会自动将你所拥有的，且Bot已加入的，且没有被其他同步组关键的，且总数不小于2的所有频道自动创建为同步组。你在第一次使用Bot时，使用自动命令很方便。
  - `add`：将频道加入现有的同步组。
    - 必须参数：`-cid [channelId]` `-gid [groupId]`，参数数量必须为1个。`cid`即为频道id，`gid`为同步组id（你可以使用`list`查看gid）
  - `list`：列出你创建的同步组。
    - 可选参数：`-gid [groupid]`, 只支持一个同步组ID。当不提供同步组ID时（`/group list`）会列出所有你创建的同步组的信息。
  - `delete`：删除同步组。
    - 必须参数: `-gid [groupid]`，参数数量必须为1个。当你删除一个同步组时，该同步组内的所有频道都会退出该同步组，变为未关联状态。
  - `set`：设置同步组的各个选项。
    - 必须参数：`-gid [groupId]` ，指定要操作的同步组。
    - 可选参数：`-lz [true/false]` （lzay的简写），设置同步组的**懒惰模式**。
    - 可选参数：`-da [true/false]`（dropAuthor的简写），设置同步组转发消息时是否携带转发源。
    - 可选参数：`-fz [true/false]`（freeze的缩写），将同步组的所有频道设置为冻结状态
  - `leave`：Bot会删除同步组并**退出该同步组内的所有频道**，当你不再想使用Bot，想在所有频道踢掉Bot时很有用
    - 必选参数：`-gid`，指定一个同步组ID
- `/channel`：对频道操作的主命令
  - `delete`：使频道退出其所在的同步组。
    - 必须参数：`-cids [channelId01, channelId02]`，要退出所在同步组的频道，可以提供多个频道ID。
  - `freeze`: 冻结频道
    - 必须参数：`-cids [channelId01, channelId02]`，在当前同步组内冻结指定频道，可以提供多个频道ID。
  - `leave`: 使Bot退出频道
    - 可选参数：`-all`，Bot退出所有加入的频道属于你的频道。
    - 可选参数：`-cids [channelId01, channelId02]`，要退出的频道，可以提供多个频道ID。